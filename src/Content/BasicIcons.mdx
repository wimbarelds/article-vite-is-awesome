## Basic Icons

Let's start with icons. Previously, I used custom React components that generated inline SVGs. They
were configurable and neat, but not particularly scalable. I decided to switch to
[**Material Symbols**](https://fonts.google.com/icons).

Material Symbols can be used in a few different ways:

- SVG files
- PNG files
- A font containing all icons
- A font with specific icons

I opted for the last option, which involves referencing a CSS file that includes desired icon names
as a query parameter (e.g., `&icon_names=home,palette,settings`).

While you could simply add this to your `index.html`, adding a new icon (like `close`) later would
result in an error:

<img
  src="google-fonts-alphabetic.webp"
  alt="Error 400, Invalid selector, icon names must be sorted alphabetically"
  className="max-w-md rounded mx-auto"
  width="372"
  height="124"
/>

That's easy to fix, but it does mean maintaining and manually sorting the list of icons in your
`index.html`, which doesn't really feel like the right place for this.

_Solution?_

```ts
const cssBaseUrl = 'https://fonts.googleapis.com/css2';
const family = 'Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,-25';

export function vitePluginIcons(names: string[]): PluginOption {
  const iconNames = names.toSorted().join(',');
  const cssUrl = `${cssBaseUrl}?family=${family}&icon_names=${iconNames}`;

  return {
    name: 'mui-iconfont',
    transformIndexHtml: () => [
      { tag: 'link', injectTo: 'head', attrs: { rel: 'stylesheet', href: cssUrl } },
    ],
  };
}
```

This solution is both simple and powerful. When Vite runs a development server or creates a build,
this plugin automatically injects the correct `<link>` tag into your HTML `<head>`. You pass the
icon names directly to the plugin (a better place for this configuration than `index.html`), and
they're sorted automatically.

### Using your plugin

Vite plugins are usually just a function that you execute. You don't have to build them or do
anything fancy.

```ts
import react from '@vitejs/plugin-react-swc';
import { defineConfig } from 'vite';

import { vitePluginIcons } from './vite-plugin-icons';

export default defineConfig({
  plugins: [react(), vitePluginIcons()],
});
```

In the above example we put our plugin in a separate file and we're just importing it. But you could
also simply keep the code of your plugin in your `vite.config.ts` file.
